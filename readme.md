### Описание файлов
- Dockerfile - файл создания образа docker
- Папка app с содержимым приложения:
  - corpora_build.py - файл, содержащий класс обработки корпуса.
  - matrices.py - файл, содержащий класс векторизации корпуса.
  - ai_embedding.py - файл, содержащий класс с моделью для создания эмбеддингов для предложений.
  - search.py - файл, содержащий класс с подсчетом метрик и выдачей результата поиска.
  - main.py - файл для запуска поиска по корпусу из командной строки.
  - webapp.py - файл для запуска поиска на сайте.
  - book.txt - сырой файл с корпусом.

### Корпус
Корпус представляет собой роман Аркадия и Бориса Стругацких "Пикник на обочине", поделённый на абзацы. Это моя любимая книга, и мне было интересно, можно ли будет сделать поиск, чтобы находить определённые сюжетные моменты.

### Запуск из командной строки
- Файл `main.py` запускается из командной строки. В качестве аргументов принимает методы, которые нужно подгрузить для поиска и количество результатов выдачи (это может занять некоторое время, особенно с AI):<p style="text-align: center;"><code>python main.py \[-bm25] \[-w2v] \[-ft] \[-ai] [-n NUM]</code></p>
  - bm25 для BM25
  - w2v для Word2Vec
  - ft для FastText
  - ai для нейронной модели
  - n для передачи количества результатов выдачи


- После этого будут загружены все выбранные модели и словари, и будет проведена векторизация корпуса.
- Затем можно будет выполнять поиск, передавая свой запрос в двойных кавычках и выбранный метод поиска (`-bm25`, `-word2vec`, `-fasttext` или `-ai`), например, `"Каждое утро я просыпаюсь и думаю о еде" -ai`
- Можно делать запрос неограниченное количество раз.
- Чтобы корректно завершить работу программы, нужно написать `-end`.<br>
(Все это приводится в инструкции по запросу `python main.py -h` и во время работы с поиском.)

### Запуск контейнера
При запуске образа автоматически запускается сайт. Для запуска интерфейса командной строки необходимо прописать в запуске `docker -it --name picknic_cli pburub/sideroad_picknic bash`, а затем вызвать `main.py` из командной строки, как показано выше.

### Модели
- [*Word2Vec*](http://vectors.nlpl.eu/repository/20/65.zip) - взята с сайта http://vectors.nlpl.eu/, характеристики:
  - Russian CoNLL17 corpus
  - tokens: 3386127535
  - lemmatized: false
  - dimensions: 100
  - vocabulary size: 3338424

- [*FastText*](http://vectors.nlpl.eu/repository/20/214.zip) - взята с сайта http://vectors.nlpl.eu/, характеристики:
  - GeoWAC: Population-balanced Russian Gigaword Corpus
  - tokens: 2107830086
  - lemmatized: false
  - dimensions: 300
  - vocabulary size: 347295
- [*AI*](https://huggingface.co/ai-forever/sbert_large_nlu_ru) - БЕРТ от Сбера, по рекомендации в инструкциях.

### Результаты работы
Результаты представлены для запроса `Любовь выскочила перед нами, как из-под земли выскакивает убийца в переулке, и поразила нас сразу обоих` при топ-5 результатах:

| Метод      | Время, c            | Количество памяти, байт |
|------------|---------------------|-------------------------|
| _BM25_     | 0.06948328018188477 | 56                      |
| _Word2Vec_ | 0.14151740074157715 | 1139384                 |
| _Fasttext_ | 0.04784727096557617 | 3417784                 |
| _AI_       | 0.8637740612030029  | 144                     |